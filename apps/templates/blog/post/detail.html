{% extends "base.html" %}
{% load blog_tags %}

{% block title %}{{ post.title }}{% endblock title %}

{% block content %}

<section>
    <h1>{{ post.title }}</h1>
    <span>Published: {{ post.published_at }} by {{ post.author }}</span>
</section>

<section>
    {{ post.body|markdown }}
</section>

<section>
    <p><a href="{% url 'blog:post_share' post.id %}">Share this post.</a></p>
</section>

<section>
    {% for post in similar_posts %}
        <p><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></p>
    {% empty %}
        There are no similar posts yet
    {% endfor %}
</section>

<section>
    {% with comments.count as total_comments %}
        <h2>{{ total_comments }} comment {{ total_comments|pluralize}}</h2>
    {% endwith %}
</section>

<section>
    {% for comment in comments %}
        <div>
            <p>Comment {{ forloop.counter }} by {{ comment.name }} {{ comment.created_at }}</p>
            {{ comment.body|linebreaks }}
        </div>
    {% empty %}
        <p>There are no comments.</p>
    {% endfor %}
</section>

<section>
    {% include "blog/post/comment_form.html" %}
</section>

{% endblock content %}